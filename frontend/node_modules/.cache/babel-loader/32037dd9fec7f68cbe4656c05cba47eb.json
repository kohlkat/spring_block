{"ast":null,"code":"/**\r\n * Radar chart module.\r\n */\nimport * as tslib_1 from \"tslib\";\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\n\nimport { XYChart, XYChartDataItem } from \"./XYChart\";\nimport { percent, Percent } from \"../../core/utils/Percent\";\nimport { RadarSeries } from \"../series/RadarSeries\";\nimport { Container } from \"../../core/Container\";\nimport { Circle } from \"../../core/elements/Circle\";\nimport { registry } from \"../../core/Registry\";\nimport { AxisRendererCircular } from \"../axes/AxisRendererCircular\";\nimport { AxisRendererRadial } from \"../axes/AxisRendererRadial\";\nimport * as $utils from \"../../core/utils/Utils\";\nimport * as $iter from \"../../core/utils/Iterator\";\nimport * as $type from \"../../core/utils/Type\";\nimport * as $math from \"../../core/utils/Math\";\nimport * as $path from \"../../core/rendering/Path\";\n/**\r\n * ============================================================================\r\n * DATA ITEM\r\n * ============================================================================\r\n * @hidden\r\n */\n\n/**\r\n * Defines a [[DataItem]] for [[RadarChart]].\r\n *\r\n * @see {@link DataItem}\r\n */\n\nvar RadarChartDataItem =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(RadarChartDataItem, _super);\n  /**\r\n   * Constructor\r\n   */\n\n\n  function RadarChartDataItem() {\n    var _this = _super.call(this) || this;\n\n    _this.className = \"RadarChartDataItem\";\n\n    _this.applyTheme();\n\n    return _this;\n  }\n\n  return RadarChartDataItem;\n}(XYChartDataItem);\n\nexport { RadarChartDataItem };\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\n\n/**\r\n * Creates a Radar chart.\r\n *\r\n * @see {@link IRadarChartEvents} for a list of available Events\r\n * @see {@link IRadarChartAdapters} for a list of available Adapters\r\n * @see {@link https://www.amcharts.com/docs/v4/chart-types/radar-chart/} for documentation\r\n * @important\r\n */\n\nvar RadarChart =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(RadarChart, _super);\n  /**\r\n   * Constructor\r\n   */\n\n\n  function RadarChart() {\n    var _this = // Init\n    _super.call(this) || this;\n    /**\r\n     * Defines X axis renderer type.\r\n     */\n\n\n    _this._axisRendererX = AxisRendererCircular;\n    /**\r\n     * Defines Y axis renderer type.\r\n     */\n\n    _this._axisRendererY = AxisRendererRadial;\n    /**\r\n     * used by cursor. We adjust innerradius if start and end angle are close to each other\r\n     * @ignore Exclude from docs\r\n     */\n\n    _this.innerRadiusModifyer = 1;\n    _this.className = \"RadarChart\";\n    _this.startAngle = -90;\n    _this.endAngle = 270;\n    _this.radius = percent(80);\n    _this.innerRadius = 0;\n\n    var radarContainer = _this.plotContainer.createChild(Container);\n\n    radarContainer.shouldClone = false;\n    radarContainer.layout = \"absolute\";\n    radarContainer.align = \"center\";\n    radarContainer.valign = \"middle\";\n    _this.seriesContainer.parent = radarContainer;\n    _this.radarContainer = radarContainer;\n    _this.bulletsContainer.parent = radarContainer;\n    _this.axisBulletsContainer = radarContainer;\n    _this._cursorContainer = radarContainer;\n    _this._bulletMask = radarContainer.createChild(Circle);\n    _this._bulletMask.shouldClone = false;\n    _this._bulletMask.element = _this.paper.add(\"path\");\n    _this._bulletMask.opacity = 0; // Apply theme\n\n    _this.applyTheme();\n\n    return _this;\n  }\n  /**\r\n   * Sets defaults that instantiate some objects that rely on parent, so they\r\n   * cannot be set in constructor.\r\n   */\n\n\n  RadarChart.prototype.applyInternalDefaults = function () {\n    _super.prototype.applyInternalDefaults.call(this); // Add a default screen reader title for accessibility\n    // This will be overridden in screen reader if there are any `titles` set\n\n\n    if (!$type.hasValue(this.readerTitle)) {\n      this.readerTitle = this.language.translate(\"Radar chart\");\n    }\n  };\n  /**\r\n   * Decorates Axis with required properties for this chart.\r\n   *\r\n   * @param axis  Axis\r\n   */\n\n\n  RadarChart.prototype.processAxis = function (axis) {\n    _super.prototype.processAxis.call(this, axis);\n\n    var renderer = axis.renderer;\n    renderer.gridContainer.parent = renderer;\n    renderer.breakContainer.parent = renderer;\n    axis.parent = this.radarContainer;\n    renderer.toBack();\n  };\n  /**\r\n   * Updates all X axes after range change event.\r\n   */\n\n\n  RadarChart.prototype.handleXAxisRangeChange = function () {\n    _super.prototype.handleXAxisRangeChange.call(this);\n\n    $iter.each(this.yAxes.iterator(), function (axis) {\n      axis.invalidate();\n    });\n  };\n  /**\r\n   * Updates all Y axes after range change event.\r\n   */\n\n\n  RadarChart.prototype.handleYAxisRangeChange = function () {\n    _super.prototype.handleYAxisRangeChange.call(this);\n\n    $iter.each(this.xAxes.iterator(), function (axis) {\n      axis.invalidate();\n    });\n  };\n  /**\r\n   * Processes JSON-based config before it is applied to the object.\r\n   *\r\n   * @ignore Exclude from docs\r\n   * @param config  Config\r\n   */\n\n\n  RadarChart.prototype.processConfig = function (config) {\n    if (config) {\n      // Set up cursor\n      if ($type.hasValue(config.cursor) && !$type.hasValue(config.cursor.type)) {\n        config.cursor.type = \"RadarCursor\";\n      } // Set up series\n\n\n      if ($type.hasValue(config.series) && $type.isArray(config.series)) {\n        for (var i = 0, len = config.series.length; i < len; i++) {\n          config.series[i].type = config.series[i].type || \"RadarSeries\";\n        }\n      } // Set up axes\n\n      /*if ($type.hasValue(config.xAxes) && $type.isArray(config.xAxes)) {\r\n          for (let i = 0, len = config.xAxes.length; i < len; i++) {\r\n              config.xAxes[i].type = config.xAxes[i].type || \"AxisRendererCircular\";\r\n          }\r\n      }\r\n      if ($type.hasValue(config.yAxes) && $type.isArray(config.yAxes)) {\r\n          for (let i = 0, len = config.yAxes.length; i < len; i++) {\r\n              config.yAxes[i].type = config.yAxes[i].type || \"AxisRendererRadial\";\r\n          }\r\n      }*/\n\n    }\n\n    _super.prototype.processConfig.call(this, config);\n  };\n  /**\r\n   * Does calculations before drawing the chart.\r\n   */\n\n\n  RadarChart.prototype.beforeDraw = function () {\n    _super.prototype.beforeDraw.call(this);\n\n    var plotContainer = this.plotContainer;\n    var rect = $math.getArcRect(this.startAngle, this.endAngle, 1);\n    var innerRect = {\n      x: 0,\n      y: 0,\n      width: 0,\n      height: 0\n    };\n    var wr = plotContainer.innerWidth / rect.width;\n    var hr = plotContainer.innerHeight / rect.height;\n    var innerRadius = this.innerRadius;\n\n    if (innerRadius instanceof Percent) {\n      var value = innerRadius.value;\n      var mr = Math.min(wr, hr);\n      value = Math.max(mr * value, mr - Math.min(plotContainer.innerHeight, plotContainer.innerWidth)) / mr;\n      innerRect = $math.getArcRect(this.startAngle, this.endAngle, value);\n      this.innerRadiusModifyer = value / innerRadius.value;\n      innerRadius = percent(value * 100);\n    } // @todo handle this when innerRadius set in pixels (do it for pie also)\n\n\n    rect = $math.getCommonRectangle([rect, innerRect]);\n    var maxRadius = Math.min(plotContainer.innerWidth / rect.width, plotContainer.innerHeight / rect.height);\n    var diameter = $utils.relativeRadiusToValue(this.radius, maxRadius) * 2 || 0;\n    var radius = diameter / 2;\n    var startAngle = this.startAngle;\n    var endAngle = this.endAngle;\n    this._pixelInnerRadius = $utils.relativeRadiusToValue(innerRadius, radius);\n    this._bulletMask.path = $path.arc(startAngle, endAngle - startAngle, radius, this._pixelInnerRadius);\n    $iter.each(this.xAxes.iterator(), function (axis) {\n      if (axis.renderer.useChartAngles) {\n        axis.renderer.startAngle = startAngle;\n        axis.renderer.endAngle = endAngle;\n      }\n\n      axis.width = diameter;\n      axis.height = diameter; //axis.renderer.width = diameter;\n      //axis.renderer.height = diameter;\n\n      axis.renderer.pixelRadiusReal = radius;\n      axis.renderer.innerRadius = innerRadius;\n    });\n    $iter.each(this.yAxes.iterator(), function (axis) {\n      axis.renderer.startAngle = startAngle;\n      axis.renderer.endAngle = endAngle;\n      axis.width = diameter;\n      axis.height = diameter; //axis.renderer.width = diameter;\n      //axis.renderer.height = diameter;\n\n      axis.renderer.pixelRadiusReal = radius;\n      axis.renderer.innerRadius = innerRadius;\n    });\n    var cursor = this.cursor;\n\n    if (cursor) {\n      cursor.width = diameter;\n      cursor.height = diameter;\n      cursor.startAngle = startAngle;\n      cursor.endAngle = endAngle;\n    }\n\n    this.radarContainer.definedBBox = {\n      x: radius * rect.x,\n      y: radius * rect.y,\n      width: radius * rect.width,\n      height: radius * rect.height\n    };\n    this.radarContainer.validatePosition();\n  };\n  /**\r\n   * Creates and returns a new Series, suitable for RadarChart.\r\n   *\r\n   * @return New Series\r\n   */\n\n\n  RadarChart.prototype.createSeries = function () {\n    return new RadarSeries();\n  };\n\n  Object.defineProperty(RadarChart.prototype, \"startAngle\", {\n    /**\r\n     * @return Start angle (degrees)\r\n     */\n    get: function () {\n      return this.getPropertyValue(\"startAngle\");\n    },\n\n    /**\r\n     * Starting angle of the Radar face. (degrees)\r\n     *\r\n     * Normally, a circular radar face begins (the radial axis is drawn) at the\r\n     * top center. (at -90 degrees)\r\n     *\r\n     * You can use `startAngle` to change this setting.\r\n     *\r\n     * E.g. setting this to 0 will make the radial axis start horizontally to\r\n     * the right, as opposed to vertical.\r\n     *\r\n     * For a perfect circle the absolute sum of `startAngle` and `endAngle`\r\n     * needs to be 360.\r\n     *\r\n     * However, it's **not** necessary to do so. You can set those to lesser\r\n     * numbers, to create semi-circles.\r\n     *\r\n     * E.g. `startAngle = -90` with `endAngle = 0` will create a radar face that\r\n     * looks like a quarter of a circle.\r\n     *\r\n     * @default -90\r\n     * @param value  Start angle (degrees)\r\n     */\n    set: function (value) {\n      this.setPropertyValue(\"startAngle\", value, true);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(RadarChart.prototype, \"endAngle\", {\n    /**\r\n     * @return End angle (degrees)\r\n     */\n    get: function () {\n      return this.getPropertyValue(\"endAngle\");\n    },\n\n    /**\r\n     * Starting angle of the Radar face. (degrees)\r\n     *\r\n     * Normally, a circular radar face ends (the radial axis is drawn) exactly\r\n     * where it has started, forming a full 360 circle. (at 270 degrees)\r\n     *\r\n     * You can use `endAngle` to end the circle somewhere else.\r\n     *\r\n     * E.g. setting this to 180 will make the radar face end at horizontal line\r\n     * to the left off the center.\r\n     *\r\n     * For a perfect circle the absolute sum of `startAngle` and `endAngle`\r\n     * needs to be 360.\r\n     *\r\n     * However, it's **not** necessary to do so. You can set those to lesser\r\n     * numbers, to create semi-circles.\r\n     *\r\n     * E.g. `startAngle = -90` with `endAngle = 0` will create a radar face that\r\n     * looks like a quarter of a circle.\r\n     *\r\n     * @default -90\r\n     * @param value  End angle (degrees)\r\n     */\n    set: function (value) {\n      this.setPropertyValue(\"endAngle\", value, true);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(RadarChart.prototype, \"radius\", {\n    /**\r\n     * @return Outer radius\r\n     */\n    get: function () {\n      return this.getPropertyValue(\"radius\");\n    },\n\n    /**\r\n     * Outer radius of the Radar face.\r\n     *\r\n     * This can either be in absolute pixel value, or relative [[Percent]].\r\n     *\r\n     * @param value  Outer radius\r\n     */\n    set: function (value) {\n      this.setPercentProperty(\"radius\", value, true, false, 10, false);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(RadarChart.prototype, \"pixelInnerRadius\", {\n    /**\r\n     * @return Inner radius in pixels\r\n     */\n    get: function () {\n      return this._pixelInnerRadius;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(RadarChart.prototype, \"innerRadius\", {\n    /**\r\n     * @return Inner radius\r\n     */\n    get: function () {\n      return this.getPropertyValue(\"innerRadius\");\n    },\n\n    /**\r\n     * Inner radius of the radar face.\r\n     *\r\n     * This can either be in absolute pixel value, or relative [[Percent]].\r\n     *\r\n     * If set in Percent, it will be relative to `radius`. (outer radius)\r\n     *\r\n     * @param value Inner radius\r\n     */\n    set: function (value) {\n      this.setPercentProperty(\"innerRadius\", value, true, false, 10, false);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  /**\r\n   * Triggers (re)rendering of the horizontal (X) axis.\r\n   *\r\n   * @ignore Exclude from docs\r\n   * @param axis Axis\r\n   */\n\n  RadarChart.prototype.updateXAxis = function (renderer) {\n    //do not call super!\n    if (renderer) {\n      renderer.processRenderer();\n    }\n  };\n  /**\r\n   * Triggers (re)rendering of the vertical (Y) axis.\r\n   *\r\n   * @ignore Exclude from docs\r\n   * @param axis Axis\r\n   */\n\n\n  RadarChart.prototype.updateYAxis = function (renderer) {\n    // do not call super!\n    if (renderer) {\n      renderer.processRenderer();\n    }\n  };\n\n  return RadarChart;\n}(XYChart);\n\nexport { RadarChart };\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\n\nregistry.registeredClasses[\"RadarChart\"] = RadarChart;","map":null,"metadata":{},"sourceType":"module"}